function loadUser(uid){
  const userRef = db.ref('users/' + uid);

  // Load main user info
  userRef.on("value", snap => {
    if(!snap.exists()) return;

    const d = snap.val();

    const weight = Number(d.TotalWeight || 0);     // ✅ Matches your DB
    const points = Number(d.Ecopoins || 0);       // ✅ Matches your DB

    nameEl.innerText   = d.name || "User";
    uidEl.innerText    = uid;
    weightEl.innerText = weight.toFixed(2);
    pointsEl.innerText = points.toFixed(2);
    moneyEl.innerText  = ((weight/100)*10).toFixed(2);
  });

  // Load transaction history
  userRef.child("history").on("value", snap => {
    if(!snap.exists()){
      histEl.innerHTML = "<div class='empty'>No transactions yet</div>";
      return;
    }

    let html = "<table><tr><th>#</th><th>Waste (g)</th><th>EcoPoints</th></tr>";
    Object.values(snap.val()).reverse().forEach((e,i)=>{
      html += `
        <tr>
          <td>${i+1}</td>
          <td>${e.weight || 0}</td>
          <td>+${e.ecoPoints || 0}</td>
        </tr>`;
    });
    html += "</table>";
    histEl.innerHTML = html;
  });
}
