<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoSafar â€¢ Admin Login</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root {
  --green-700: #145A13;
  --accent: #2ecc71;
}
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Inter", sans-serif;
}
body {
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg,#e1f3e7,#d6efe1);
}
.card {
  width: 360px;
  background: #fff;
  padding: 40px 30px;
  border-radius: 20px;
  text-align: center;
  box-shadow: 0 15px 35px rgba(0,0,0,0.08);
}
.logo-box img {
  width: 90px;
  margin-bottom: 12px;
}
.title {
  font-size: 26px;
  font-weight: 700;
  color: var(--green-700);
}
.subtitle {
  font-size: 13px;
  color: #4f5e57;
  margin-bottom: 20px;
}
label {
  display: block;
  text-align: left;
  margin-top: 15px;
  font-size: 13px;
  font-weight: 500;
}
input, select {
  width: 100%;
  padding: 12px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1px solid #c8d8cc;
}
.btn {
  width: 100%;
  margin-top: 25px;
  padding: 12px;
  border: none;
  border-radius: 12px;
  background: var(--green-700);
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}
.btn:hover {
  background: var(--accent);
}
.error-box {
  display: none;
  margin-top: 15px;
  padding: 10px;
  border-radius: 10px;
  background: #ffe7e7;
  color: #c40000;
  font-size: 13px;
}
</style>
</head>

<body>

<div class="card">
  <div class="logo-box">
    <img src="logo.png" alt="EcoSafar Logo">
  </div>

  <h2 class="title">Admin Login</h2>
  <p class="subtitle">City Control Panel Access</p>

  <label>City</label>
  <select id="city">
    <option value="">Select City</option>
    <option value="Anand">Anand</option>
    <option value="Ahmedabad">Ahmedabad</option>
    <option value="Surat">Surat</option>
  </select>

  <label>Admin ID</label>
  <input id="adminUser" placeholder="Enter Admin ID">

  <label>Password</label>
  <input id="adminPass" type="password" placeholder="Enter Password">

  <button class="btn" onclick="loginAdmin()">Sign In</button>

  <div class="error-box" id="errorBox">Invalid credentials</div>
</div>

<script>
/* ðŸ”¥ USE SAME FIREBASE PROJECT AS YOUR DATABASE SCREENSHOT */
const firebaseConfig = {
  apiKey: "AIzaSyC-ukbAaOdiEb65v9F7FuBzT0TTRoQHyxw",
  authDomain: "ecosafar-b8e9b.firebaseapp.com",
  databaseURL: "https://ecosafar-b8e9b-default-rtdb.firebaseio.com",
  projectId: "ecosafar-b8e9b",
  storageBucket: "ecosafar-b8e9b.appspot.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function loginAdmin() {
  const city = document.getElementById("city").value;
  const user = document.getElementById("adminUser").value.trim();
  const pass = document.getElementById("adminPass").value.trim();
  const errorBox = document.getElementById("errorBox");

  errorBox.style.display = "none";

  if (!city || !user || !pass) {
    errorBox.style.display = "block";
    errorBox.textContent = "Please fill all fields";
    return;
  }

  db.ref("admins/" + city).once("value")
    .then(snapshot => {
      if (!snapshot.exists()) {
        errorBox.style.display = "block";
        errorBox.textContent = "City not found";
        return;
      }

      const admin = snapshot.val();

      if (admin.adminID === user && admin.Password === pass) {
        sessionStorage.setItem("ecosafar_admin", "true");
        sessionStorage.setItem("ecosafar_admin_city", city);
        window.location.href = "AdminDash.html";
      } else {
        errorBox.style.display = "block";
        errorBox.textContent = "Invalid credentials";
      }
    })
    .catch(err => {
      console.error(err);
      errorBox.style.display = "block";
      errorBox.textContent = "Database error";
    });
}
</script>

</body>
</html>
