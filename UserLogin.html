<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoSafar ‚Ä¢ User Login</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
:root{
    --green-dark:#0b3d0f;
    --green-main:#145A13;
    --accent:#2ecc71;
    --bg:#eef9f1;
}

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Inter,sans-serif;
}

body{
    background:linear-gradient(135deg,#e8f6ef,#dff3ea);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.card{
    background:white;
    width:420px;
    padding:44px;
    border-radius:28px;
    box-shadow:0 20px 50px rgba(0,0,0,0.12);
    text-align:center;
}

.logo{
    width:120px;
    margin-bottom:18px;
    animation:float 4s ease-in-out infinite;
}

@keyframes float{
    0%{transform:translateY(0)}
    50%{transform:translateY(-10px)}
    100%{transform:translateY(0)}
}

h2{
    color:var(--green-main);
    margin-bottom:8px;
    font-weight:700;
}

.subtitle{
    font-size:14px;
    color:#4f5e57;
    margin-bottom:28px;
}

label{
    display:block;
    text-align:left;
    font-weight:600;
    margin-bottom:6px;
}

input{
    width:100%;
    padding:14px;
    border-radius:14px;
    border:1px solid #cfded5;
    margin-bottom:22px;
    font-size:15px;
}

input:focus{
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 6px rgba(46,204,113,0.4);
}

button{
    width:100%;
    padding:15px;
    border:none;
    border-radius:16px;
    background:var(--green-main);
    color:white;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    transition:0.25s;
}

button:hover{
    background:var(--accent);
    transform:translateY(-2px);
}

.msg{
    margin-top:18px;
    font-weight:600;
    color:var(--green-dark);
}

.error{
    color:#c40000;
}
</style>
</head>

<body>

<div class="card">

    <img src="logo.png" class="logo" alt="EcoSafar Logo">

    <h2>User Login</h2>
    <p class="subtitle">Scan or enter your RFID UID</p>

    <label>RFID UID</label>
    <input id="uidInput" placeholder="Example: BF604DEE">

    <button onclick="login()">Open Dashboard</button>

    <div id="msg" class="msg"></div>
</div>

<script>
/* üî• FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyC-ukbAaOdiEb65v9F7FuBzT0TTRoQHyxw",
  databaseURL: "https://ecosafar-3da96-default-rtdb.firebaseio.com",
  projectId: "ecosafar-3da96"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* üîê UID-BASED LOGIN */
function login(){

    const msg = document.getElementById("msg");

    let uid = document.getElementById("uidInput")
        .value.trim()
        .replace(/\s+/g,"")
        .toUpperCase();

    if(!uid){
        msg.innerHTML = "<span class='error'>Please enter RFID UID</span>";
        return;
    }

    db.ref("users/" + uid).once("value")
    .then(snapshot => {

        if(!snapshot.exists()){
            msg.innerHTML = "<span class='error'>RFID not recognized</span>";
            return;
        }

        msg.innerHTML = "Access granted ‚úî Redirecting...";

        setTimeout(()=>{
            window.location.href = "UserDash.html";
        },1200);

    })
    .catch(err=>{
        msg.innerHTML = "<span class='error'>Connection error</span>";
        console.error(err);
    });
}
</script>

</body>
</html>

