<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoSafar â€¢ User Registration</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
/* Reset & Basics */
* { box-sizing: border-box; margin:0; padding:0; font-family:'Inter',sans-serif; }
body {
    background: linear-gradient(135deg,#e8f6ef,#dff3ea);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
}
/* Card */
.card {
    background:#fff;
    width:420px;
    padding:50px 35px;
    border-radius:24px;
    box-shadow:0 20px 50px rgba(0,0,0,0.12);
    text-align:center;
    transition:all 0.3s ease;
}
.card:hover { transform:translateY(-5px); box-shadow:0 25px 60px rgba(0,0,0,0.15); }
/* Logo Animation */
.logo {
    width:120px; height:120px;
    margin:0 auto 20px;
    display:block;
    border-radius:16px;
    object-fit:contain;
    animation:logo-pulse 2s infinite ease-in-out,logo-float 3s infinite ease-in-out;
}
@keyframes logo-pulse {0%,100%{transform:scale(1);}50%{transform:scale(1.1);}}
@keyframes logo-float {0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}

/* Headings */
h2{color:#145A13;font-size:28px;margin-bottom:8px;}
.subtitle{font-size:14px;color:#4f5e57;margin-bottom:30px;}

/* Form Fields */
label{font-weight:600;margin-bottom:6px;display:block;color:#333;text-align:left;}
input, select{
    width:100%;
    padding:14px 16px;
    border-radius:12px;
    border:1px solid #cfded5;
    margin-bottom:18px;
    font-size:14px;
    transition:border 0.3s,box-shadow 0.3s;
}
input:focus, select:focus { outline:none; border-color:#145A13; box-shadow:0 0 6px rgba(20,90,19,0.2); }

/* Button */
button{
    width:100%;
    padding:15px;
    border:none;
    border-radius:16px;
    background:#145A13;
    color:#fff;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    transition:all 0.25s ease,box-shadow 0.25s ease;
    margin-bottom:12px;
}
button:hover{ background:#0f450f; box-shadow:0 5px 15px rgba(20,90,19,0.4); }

/* Messages */
.msg{ margin-top:18px; font-weight:600; font-size:14px; }
.error{color:#c40000;}
.success{color:#145A13;}
</style>
</head>
<body>

<div class="card">
    <img src="logo.png" alt="EcoSafar Logo" class="logo">
    <h2>User Registration</h2>
    <p class="subtitle">Create your EcoSafar account</p>

    <label for="name">Full Name</label>
    <input id="name" placeholder="Enter your full name">

    <label for="city">City</label>
    <select id="city">
        <option value="">Select City</option>
        <option value="Anand">Anand</option>
        <option value="Ahmedabad">Ahmedabad</option>
        <option value="Surat">Surat</option>
    </select>

    <label for="uid">RFID UID</label>
    <input id="uid" placeholder="Enter RFID UID">

    <label for="password">Password</label>
    <input id="password" type="password" placeholder="Enter password">

    <button onclick="register()">Register</button>
    <div id="msg" class="msg"></div>
</div>

<script>
async function register(){
    const name = document.getElementById("name").value.trim();
    const city = document.getElementById("city").value;
    const username = document.getElementById("uid").value.trim().toUpperCase();
    const password = document.getElementById("password").value;
    const msg = document.getElementById("msg");

    if(!name || !city || !username || !password){
        msg.innerHTML = "<span class='error'>All fields are required</span>";
        return;
    }

    try {
        const res = await fetch('/api/register',{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({name, username, password})
        });
        const data = await res.json();
        if(data.error){
            msg.innerHTML = "<span class='error'>"+data.error+"</span>";
        } else {
            msg.innerHTML = "<span class='success'>Registration successful!</span>";
            setTimeout(()=>{ window.location.href="UserLogin.html"; },1500);
        }
    } catch(err){
        msg.innerHTML = "<span class='error'>"+err.message+"</span>";
    }
}
</script>

</body>
</html>
