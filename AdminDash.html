<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <style>
    table { width:100%; border-collapse:collapse; }
    th,td { border:1px solid #000; padding:8px; text-align:center; }
  </style>
</head>
<body>

<h2>EcoSafar â€“ Admin Dashboard</h2>

<table>
  <thead>
    <tr>
      <th>Rank</th>
      <th>Name</th>
      <th>Total Weight (g)</th>
      <th>EcoPoints</th>
    </tr>
  </thead>
  <tbody id="users"></tbody>
</table>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBK72ROuOs4fDc5p5CFaHSWwW8oQZwEL-g",
  databaseURL: "https://ecosafar-b8e9b-default-rtdb.firebaseio.com",
  projectId: "ecosafar-b8e9b"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

db.ref("users").on("value", snap=>{
  let arr = [];

  snap.forEach(u=>{
    arr.push(u.val());
  });

  arr.sort((a,b)=>(b.Ecopoints||0)-(a.Ecopoints||0));

  let html="";
  arr.forEach((u,i)=>{
    html += `
      <tr>
        <td>${i+1}</td>
        <td>${u.name || "-"}</td>
        <td>${u.TotalWeight || 0}</td>
        <td>${u.Ecopoints || 0}</td>
      </tr>`;
  });

  document.getElementById("users").innerHTML = html;
});
</script>

</body>
</html>